--- 
layout: post
title: Git Branches
published: true
meta: 
  _edit_last: "1"
tags: 
- git
- git branch
type: post
status: publish
---
Per lo sviluppo di un progetto sto utilizzando git in locale con due branches. Un branch master/origin, dove risiede il lavoro pronto per essere caricato in produzione, e uno develop, su cui effettuo i commits, sviluppo nuove featurse, e, quando tutto va bene, implemento nel branch master/origin. Qui sotto un breve tutorial su come cominciare. Diamo per scontato di avere un repo inizializzato, con il branch master/origin. Per creare il nuovo branch 'develop'
{% highlight bash %}
git branch develop
{% endhighlight %}
per vedere i vari branches
{% highlight bash %}
git branch
{% endhighlight %}
l'asterisco indica il branch attualmente selezionato
per passare da un branch all'altro
{% highlight bash %}
git checkout master
git checkout develop
{% endhighlight %}
Per portare avanti il codice su develop, selezioniamo il branch develop
{% highlight bash %}
git checkout develop
{% endhighlight %}
andiamo avanti con i nostri commit che verranno eseguiti SOLO sul branch develop.
Difatti, se torniamo sul branch master e cerchiamo le modifiche appena fatte, non le troveremo perche' sono solo su develop.
quando le modifiche sono pronte per essere messe nel branch 'master', selezioniamolo
git checkout master
e diciamo al branch master di prendere le modifiche fatte su develop
{% highlight bash %}
git merge develop
{% endhighlight %}
Una volta che le nuove modifiche sono state implementate, possiamo taggare il branch master con il corrente numero di versione
{% highlight bash %}
git tag 0.1
{% endhighlight %}
se un giorno decidessimo che il branch develop non ci serve più, cancelliamolo 
{% highlight bash %}
git branch -d develop
{% endhighlight %}

<h4>Differenze tra i due branches</h4>
Può capitare che alcune modifiche fatte su 'develop' differiscano dal codice presente su master. Puoà darsi che abbiate innavertitamente lavorato su master per delle modifiche che dovevano essere effettuate su develop, o altri scenari simili. Quando, dal branch master lanciamo
{% highlight bash %}
git merge develop
{% endhighlight %}
Le modifiche fatte su master vengono fuse alle modifiche fatte su develop. Se alcune di queste modifiche riguardano la stessa porzione di codice, al primo commit git ci segnalerà che dobbiamo risolvere un conflitto prima di proseguire.
{% highlight bash %}
file_config.txt: needs merge
{% endhighlight %}
Apriamo il file incriminato, sistemiamolo e poi git add e git commit.
{% highlight bash %}
git add file_config.txt
git commit
{% endhighlight %}
<h4>Il control-Z dell'ultimo merge</h4>
Se avete appena fatto il merge sul branch master di una bizzarra feature che avevate sviluppato su develop, che credevate pronta e superefficiente ma in realtà ha scatenato un turbine di email di protesta da parte degli utenti che rivogliono indietro il loro vecchio sistema, dove "tutto funzionava", dove "tutto era più semplice" e sentite che sta per arrivare la email "si stava meglio quando si stava peggio", beh, allora, forse è meglio tornare indietro, e levare l'ultima feature aggiunta.
{% highlight bash %}
git reset --hard ORIG_HEAD
{% endhighlight %}
Qui il <a href="http://book.git-scm.com/3_basic_branching_and_merging.html">tutorial completo</a>
Per vedere tutti i commit fatti nei minimi dettagli, installate <a href="http://lwn.net/Articles/140350/">gitk</a> e lanciatelo da console nella directory dove avete un progetto versionato
