--- 
layout: post
title: cakePHP testing
published: false
meta: 
  _edit_last: "1"
tags: []

type: post
status: draft
---
I tests sono importanti, aiutano a scrivere miglior codice, e ci risparmieranno tempo in futuro. Poniamo il caso di dover aggiornare la nostra applicazione con una nuova versione di cake, o peggio ancora, da php5 a php..6. Se nella vostra applicazione avete scritto dei test, potete velocemente verificare cosa funziona e cosa no. Se non lo avete fatto, vi tocca spulciare i controller, le view e i model alla ricerca di qualcosa che non va. 
Per il testing CakePHP si appoggia su SimpleTest. Nel futuro e' previsto il passaggio a phpUnit.
Per cominciare a testare la vostra applicazione:
<ol>
	<li>scaricate SimpleTest (la versione 1.01, perche' la piu' recente non funziona con cake)</li>
	<li>spostatevi in http://localhost/test e verificate che tutto funzioni. Settatevi un database di test/li>
	<li>create le fixture da console, lasciate perdere fixturizer o latri script che si trovano in giro, cakephp genere la fixture, basta seguire le indicazioni di bake. Supponiamo di avere un applicazione funzionante, con dei record gi'ainseriti nelle nostre tabelle. A questo punto lanciate bake<br>
[bash]
cd cake/console
./cake bake

[D]atabase Configuration
[M]odel
[V]iew
[C]ontroller
[P]roject
[F]ixture
[T]est case
[Q]uit
What would you like to Bake? (D/M/V/C/P/F/T/Q) 
F

Possible Models based on your current database:
1. Audio
2. Ecc
Enter a number from the list above,
type in the name of another model, or 'q' to exit  
[q] > 1

Would you like to import schema for this fixture? (y/n) 
[n] > n

Would you like to use record importing for this fixture? (y/n) 
[n] > n

Would you like to build this fixture with data from User's table? (y/n) 
[n] > y

Please provide a SQL fragment to use as conditions
Example: WHERE 1=1 LIMIT 10  
[WHERE 1=1 LIMIT 10] > 

Baking test fixture for User...
[/bash]
</li>
</ol>
Sempre dalla console, create i tests controller. Dovrete riscriverli, ma alemno avrete un template con l' elenco delle funzioni da testare gia' scritto.
[bash]
cd cake/console
./cake bake

[D]atabase Configuration
[M]odel
[V]iew
[C]ontroller
[P]roject
[F]ixture
[T]est case
[Q]uit
What would you like to Bake? (D/M/V/C/P/F/T/Q) 
T
[/bash]
Seguite le risposte di default e tutto andra' per il meglio.
Ora abbiamo i file necessari per cominciare a sporcarci le mani. In <a href="http://localhost/test">http://localhost/test</a> dovreste visualizzare la pagina con i test. Se cosi' non fosse avete sbagliato qualcosa nell'installazione dei test. Controllate il manuale di cake per eventali errori.
Per testare i controller seguite questo <a href="http://mark-story.com/posts/view/testing-cakephp-controllers-the-hard-way">post</a> sul blog di mark story 
